<div class="card p-3 mx-2 mb-4 shadow-sm">
  <div class="form-group">
    <input type="text" class="form-control survey-title" id="survey-name" [(ngModel)]="survey.name"
           placeholder="Kérdőív neve" name="survey-name">
  </div>
  <div class="row p-3">
    <div class="col-auto">
      <label for="multi-completion-selector">Kitölthetőség:</label>
    </div>
    <div class="col-auto">
      <select class="form-select" id="multi-completion-selector" [(ngModel)]="survey.multiCompletion" name="multi-completion">
        <option value="true">Egyszeri kitöltés</option>
        <option value="false">Többszöri kitöltés</option>
      </select>
    </div>
    <div class="col-auto">
      <label for="visibility-selector">Hozzáférési jogok:</label>
    </div>
    <div class="col-auto">
      <select class="form-select" id="visibility-selector" [(ngModel)]="survey.visibility" name="visibility">
        <option value="public">Nyilvános</option>
        <option value="invite_only">Korlátozott</option>
        <option value="private">Privát</option>
      </select>
    </div>
    <div class="form-check col-2">
      <label for="anonymous-selector">Anonim válaszadás</label>
      <input type="checkbox" class="form-check-input" id="anonymous-selector" [(ngModel)]="survey.anonymous" name="anonynous">
    </div>
    <div class="row p-3" *ngIf="survey.visibility === 'invite_only'">
      <div class="col-auto">
        <label>E-mail címek:</label>
      </div>
      <div class="form-group">
        <div class="row py-1" *ngFor="let item of survey.allowedEmails; let i = index; trackBy: trackByFn">
          <div class="col-11">
            <input type="email" class="form-control" [(ngModel)]="survey.allowedEmails[i]" id="allowed-email-{{i}}" placeholder="E-mail cím">
          </div>
          <div class="col-1">
            <button class="btn btn-close" (click)="removeEmail(i)"></button>
          </div>
        </div>
        <div class="row py-1">
          <div class="col-3">
            <button class="btn btn-light rounded-0" (click)="addEmail()"><i class="bi bi-arrow-return-right" (click)="addEmail()"></i>Email hozzáadása</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngFor="let question of survey.questions; let i=index" class="card p-3 mx-2 my-3 shadow-sm">
  <app-question-editor [question]="question"></app-question-editor>
  <div class="d-grid gap-2 d-md-flex justify-content-md-end my-2">
    <button type="button" class="btn btn-danger rounded-circle" (click)="removeQuestion(i)">
      <i class="bi bi-trash"></i>
    </button>
  </div>
</div>

<div class="d-grid gap-2 d-md-flex justify-content-md-end p-1">
  <i class="bi bi-plus-circle-fill fs-1 text-info clickable" (click)="addQuestion()"></i>
</div>
<button class="btn btn-lg btn-primary rounded-0" (click)="saveSurvey()">Mentés</button>
